<!DOCTYPE>
<html>
	<head>
		<title>Websocket</title>
	</head>
	<body onload='init();'>
		<script>
			var ws;
			function init() {
				var url = document.URL.replace("http://", "ws://");
				ws = new WebSocket(url);
				ws.onopen = (evt) => {
					console.log('socket is open');
				}
				ws.onclose = (evt) => {
					console.log('socket is close');
				}
				ws.onmessage = (evt) => {
					let p = document.createElement("p");
					p.innerHTML = evt.data;
					console.log(evt.data);
					document.getElementById("output").appendChild(p);
				}
				ws.onerror = (evt) => {}
			}
			function send() {
				ws.send(document.getElementById("input").value);
			}
		</script>
		<input type="text" id="input"/>
		<input type="button" value="Send" onClick="send();"/>
	<div id="output" ></div>
	</body>
</html>